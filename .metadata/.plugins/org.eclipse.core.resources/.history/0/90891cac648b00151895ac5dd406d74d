package controllers;
import spark.template.freemarker.FreeMarkerEngine;
import static spark.Spark.*;
import repositories.JobRepository;
import spark.ModelAndView;
import java.util.ArrayList;
import java.util.HashMap;

import models.Job;


public class JobsController {
	private static final String PATH_TO_VIEW = "views/jobs/";
	
	private static FreeMarkerEngine freeMarkerEngine;
	
	private static JobRepository jobRepository=new JobRepository();
	
	public static void init(FreeMarkerEngine freeMarkerEngine) {
		JobsController.freeMarkerEngine=freeMarkerEngine;
		Index();	
	}

	private static void Index() {
		get("/", (request, response) -> {
			ArrayList<Job> allJobs=jobRepository.findAll();
			HashMap<String, Object> root=new HashMap<String, Object>(); 
			root.put("jobs", allJobs);
            return new ModelAndView(root, PATH_TO_VIEW+"index.ftl");
        }, freeMarkerEngine);
	}

}
